<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Package - Wanderluxe</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>
<body>
    <header>
        <nav>
             <div class="logo">
                <div class="logo-icon">
                    <img src="{{ url_for('static',filename='images/logoo.png')}}" alt="Wanderluxe Logo">
                </div>
                <span class="logo-text">Wanderluxe</span>
            </div>
             
            <ul class="nav-links">
                <li><a href="{{ url_for('index') }}">Home</a></li>
                <li><a href="{{ url_for('packages') }}">Destinations</a></li>
                <li><a href="{{ url_for('packages') }}?category=Spiritual">Spiritual</a></li>
                <li><a href="{{ url_for('about')}}">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="auth-buttons">
                <span class="user-greeting">{{ session.user_name }}</span>
                <a href="{{ url_for('dashboard') }}" class="btn btn-login">Dashboard</a>
                <a href="{{ url_for('logout') }}" class="btn btn-signup">Logout</a>
            </div>
        </nav>
    </header>

    <div class="booking-page">
        <div class="container">
            <div class="booking-grid">
                <div class="booking-form-section">
                    <h1>Complete Your Booking</h1>
                    
                    <form method="POST" class="booking-form">
                        <div class="form-group">
                            <label>Travel Date</label>
                            <input type="date" name="travel_date" id="travelDate" required>
                        </div>

                        <div class="form-group">
                            <label>Number of Travelers</label>
                            <select name="travelers_count" id="travelers" required>
                                <option value="1">1 Person</option>
                                <option value="2">2 People</option>
                                <option value="3">3 People</option>
                                <option value="4">4 People</option>
                                <option value="5">5 People</option>
                                <option value="6">6 People</option>
                                <option value="7">7 People</option>
                                <option value="8">8+ People</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Special Requests (Optional)</label>
                            <textarea name="special_requests" rows="4" placeholder="Any special requirements or preferences..."></textarea>
                        </div>

                        <div class="price-summary">
                            <h3>Price Summary</h3>
                            <div class="summary-row">
                                <span>Price per person:</span>
                                <span id="pricePerPerson">‚Çπ{{ package[5] }}</span>
                            </div>
                            <div class="summary-row">
                                <span>Number of travelers:</span>
                                <span id="numTravelers">1</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total Amount:</span>
                                <span id="totalAmount">‚Çπ{{ package[5] }}</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-signup btn-full">Confirm Booking</button>
                    </form>
                </div>

                <div class="package-summary">
                    <h3>Package Details</h3>
                    <div class="summary-card">
                        <img src="{{ url_for('static', filename='images/' + package[7]) }}" 
                             alt="{{ package[1] }}"
                             onerror="this.src='https://in.pinterest.com/pin/154529830959059034/'">
                        <h4>{{ package[1] }}</h4>
                        <p class="summary-destination">üìç {{ package[3] }}</p>
                        <div class="summary-info">
                            <div>‚è±Ô∏è {{ package[4] }}D/{{ package[4]-1 }}N</div>
                            <div>üè∑Ô∏è {{ package[2] }}</div>
                        </div>
                        <div class="summary-highlights">
                            {% for highlight in package[8].split('|')[:4] %}
                            <div>‚úì {{ highlight }}</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set minimum date to tomorrow
        const today = new Date();
        today.setDate(today.getDate() + 1);
        const tomorrow = today.toISOString().split('T')[0];
        document.getElementById('travelDate').setAttribute('min', tomorrow);
        
        // Price calculation
        const pricePerPerson = {{ package[5] }};
        const travelersSelect = document.getElementById('travelers');
        const totalAmountEl = document.getElementById('totalAmount');
        const numTravelersEl = document.getElementById('numTravelers');

        travelersSelect.addEventListener('change', function() {
            const count = parseInt(this.value);
            const total = pricePerPerson * count;
            totalAmountEl.textContent = '‚Çπ' + total.toLocaleString('en-IN');
            numTravelersEl.textContent = count;
        });
    </script>


</body>
</html>